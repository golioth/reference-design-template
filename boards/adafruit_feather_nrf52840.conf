# Copyright (c) 2022-2023 Golioth, Inc.
# SPDX-License-Identifier: Apache-2.0
CONFIG_GOLIOTH_SAMPLES_COMMON=y

CONFIG_LOG=y

CONFIG_NETWORKING=y
CONFIG_NET_L2_OPENTHREAD=y
CONFIG_MPSL=y

CONFIG_NET_SHELL=y
CONFIG_OPENTHREAD_SHELL=y
CONFIG_SHELL_ARGC_MAX=26
CONFIG_SHELL_CMD_BUFF_SIZE=416

# IMPORTANT: Change the Thread network credentials to match your Thread network setup
CONFIG_OPENTHREAD_NORDIC_LIBRARY_MASTER=y
CONFIG_OPENTHREAD_NETWORK_NAME="golioth-thread"
CONFIG_OPENTHREAD_NETWORKKEY="ef:4c:40:63:1c:65:d4:d9:c7:27:6e:c2:9c:d3:66:c4"
CONFIG_OPENTHREAD_CHANNEL=26

CONFIG_MBEDTLS_SHA1_C=n
CONFIG_FPU=y

# TLS configuration
CONFIG_MBEDTLS=y
CONFIG_MBEDTLS_BUILTIN=n
CONFIG_MBEDTLS_ENABLE_HEAP=y
CONFIG_MBEDTLS_HEAP_SIZE=10240

# PSK needs to be manually enabled to prevent ENOTSUP (-134)
CONFIG_MBEDTLS_KEY_EXCHANGE_SOME_PSK_ENABLED=y
CONFIG_MBEDTLS_KEY_EXCHANGE_PSK_ENABLED=y
CONFIG_NET_SOCKETS_SOCKOPT_TLS=y

# Golioth-specific configuration
CONFIG_GOLIOTH=y
CONFIG_GOLIOTH_SYSTEM_CLIENT=y

CONFIG_LOG_BACKEND_GOLIOTH=y
CONFIG_LOG_PROCESS_THREAD_STACK_SIZE=2048

# NAT64-prefixed coap.golioth.io IPv4
CONFIG_GOLIOTH_SYSTEM_SERVER_HOST="fd87:b615:1a98:2:0:0:2287:5a70"

#Increase TLS message size
CONFIG_MBEDTLS_SSL_IN_CONTENT_LEN=1400

# Debug
CONFIG_THREAD_NAME=y
CONFIG_SCHED_CPU_MASK=y
CONFIG_THREAD_ANALYZER=y

CONFIG_THREAD_NAME=y

# Shell setup
CONFIG_SHELL=y

# Settings shell
CONFIG_SETTINGS=y
CONFIG_GOLIOTH_SETTINGS=y
CONFIG_SETTINGS_RUNTIME=y
CONFIG_GOLIOTH_SAMPLE_PSK_SETTINGS=y
CONFIG_GOLIOTH_SAMPLE_SETTINGS_AUTOLOAD=y
CONFIG_GOLIOTH_SAMPLE_SETTINGS_SHELL=y

CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_NVS=y

CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=8192

